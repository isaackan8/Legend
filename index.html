<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤©å‘½å‚³å¥‡</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'china-red': '#B22222',
                        'china-gold': '#D4A017',
                        'china-ink': '#2F4F4F',
                        'china-cream': '#F5F5DC',
                        'china-dark': '#1A252F',
                    },
                    animation: {
                        'flip': 'flip 0.6s ease-in-out',
                        'pulse-glow': 'pulseGlow 1.5s ease-in-out infinite',
                        'fade-in': 'fadeIn 0.8s ease-out',
                        'lotus-float': 'lotusFloat 5s ease-in-out infinite',
                    },
                    keyframes: {
                        flip: {
                            '0%': { transform: 'rotateY(0deg)' },
                            '50%': { transform: 'rotateY(90deg)' },
                            '100%': { transform: 'rotateY(0deg)' },
                        },
                        pulseGlow: {
                            '0%, 100%': { boxShadow: '0 0 5px rgba(212, 160, 23, 0.5)' },
                            '50%': { boxShadow: '0 0 20px rgba(212, 160, 23, 1)' },
                        },
                        fadeIn: {
                            '0%': { opacity: '0', transform: 'scale(0.95)' },
                            '100%': { opacity: '1', transform: 'scale(1)' },
                        },
                        lotusFloat: {
                            '0%, 100%': { transform: 'translateY(0) rotate(0deg)' },
                            '50%': { transform: 'translateY(-20px) rotate(5deg)' },
                        },
                    },
                },
            },
            darkMode: 'class',
        };
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;700&display=swap');

        body {
            font-family: 'Noto Serif TC', serif, system-ui;
        }

        .china-bg {
            background: linear-gradient(135deg, #B22222, #D4A017);
        }

        .fortune-card {
            perspective: 1000px;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .fortune-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        }

        .fortune-card.selected {
            animation: pulse-glow 1.5s ease-in-out infinite;
        }

        .lotus-particle {
            position: absolute;
            width: 20px;
            height: 20px;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="%23D4A017" stroke-width="2"><path d="M12 3C7 3 3 7 3 12s4 9 9 9 9-4 9-9-4-9-9-9zm0 16c-3.9 0-7-3.1-7-7s3.1-7 7-7 7 3.1 7 7-3.1 7-7 7z"/></svg>') no-repeat center;
            opacity: 0.5;
            animation: lotus-float 5s ease-in-out infinite;
        }

        .modal-animate {
            animation: fade-in 0.8s ease-out;
        }

        .dark .china-bg {
            background: linear-gradient(135deg, #1A252F, #2F4F4F);
        }

        .dark .fortune-card {
            background-color: #2F4F4F;
            color: #F5F5DC;
        }
    </style>
</head>
<body class="bg-china-cream dark:bg-china-dark text-gray-800 dark:text-china-cream transition-colors duration-300 relative overflow-hidden">
    <!-- Sound Effects -->
    <audio id="selectSound" src="https://freesound.org/data/previews/171/171671_2435678-lq.mp3"></audio>
    <audio id="successSound" src="https://freesound.org/data/previews/387/387347_4062812-lq.mp3"></audio>
    <audio id="failSound" src="https://freesound.org/data/previews/203/203538_2617037-lq.mp3"></audio>
    <audio id="modalSound" src="https://freesound.org/data/previews/614/614097_1413608-lq.mp3"></audio>

    <!-- Particle Effects -->
    <div class="fixed inset-0 pointer-events-none">
        <div class="lotus-particle" style="top: 10%; left: 15%; animation-delay: 0s;"></div>
        <div class="lotus-particle" style="top: 30%; left: 80%; animation-delay: 1s;"></div>
        <div class="lotus-particle" style="top: 60%; left: 25%; animation-delay: 2s;"></div>
        <div class="lotus-particle" style="top: 80%; left: 70%; animation-delay: 3s;"></div>
    </div>

    <div class="min-h-screen flex flex-col">
        <!-- Game Header -->
        <header class="china-bg text-china-cream p-4 shadow-md">
            <div class="container mx-auto flex flex-wrap justify-between items-center">
                <h1 class="text-2xl md:text-3xl font-bold flex items-center">
                    <span class="text-4xl mr-2">ğŸ“œ</span> å¤©å‘½å‚³å¥‡
                </h1>
                <div class="flex items-center space-x-4">
                    <div class="bg-china-cream/20 rounded-lg px-3 py-1">
                        <span class="font-semibold">åˆ†æ•¸:</span>
                        <span id="score" class="text-china-gold font-bold">0</span>
                    </div>
                    <div class="bg-china-cream/20 rounded-lg px-3 py-1">
                        <span class="font-semibold">ç­‰ç´š:</span>
                        <span id="level" class="text-china-gold font-bold">1</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Game Container -->
        <main class="flex-grow container mx-auto p-4">
            <!-- Game State Display -->
            <div id="gameState" class="hidden text-center my-4 text-xl">
                <h2 class="text-3xl font-bold mb-2 text-china-red dark:text-china-gold">æº–å‚™é–‹å•Ÿå¤©å‘½ï¼</h2>
                <p>æˆç‚ºå‚³å¥‡å‘½ç†å¸«ï¼Œæ´æ‚‰å®¢äººçš„å‘½é‹ï¼</p>
            </div>

            <!-- Start Screen -->
            <div id="startScreen" class="text-center py-8 max-w-2xl mx-auto animate-[fade-in_1s_ease-out]">
                <div class="w-40 h-40 rounded-full mx-auto mb-6 bg-[url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="50" fill="%23D4A017"/><text x="50" y="65" font-size="50" text-anchor="middle" fill="%23B22222">å‘½</text></svg>')] animate-[lotus-float_5s_ease-in-out_infinite]"></div>
                <h2 class="text-4xl font-bold mb-6 text-china-red dark:text-china-gold">å¤©å‘½å‚³å¥‡</h2>
                <p class="mb-8 text-lg">åŒ–èº«å‘½ç†å¤§å¸«ï¼Œé‹ç”¨æ˜“ç¶“ã€ç´«å¾®ã€é¢¨æ°´ç­‰ä¸­å¼å åœè¡“ï¼Œç‚ºé¡§å®¢æŒ‡é»è¿·æ´¥ï¼Œè´å¾—è²è­½èˆ‡æ¦®è€€ï¼</p>
                <button id="startBtn" class="px-8 py-3 popolo bg-china-red hover:bg-opacity-90 text-china-cream text-lg rounded-full shadow-lg transition-transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-china-gold">
                    é–‹å•Ÿå¤©å‘½
                </button>
            </div>

            <!-- Game Area (initially hidden) -->
            <div id="gameArea" class="hidden">
                <!-- Customer Request Section -->
                <div class="mb-6 p-4 bg-white dark:bg-china-ink rounded-lg shadow-md">
                    <div class="flex items-start">
                        <div class="w-16 h-16 md:w-20 md:h-20 bg-gray-200 dark:bg-china-ink rounded-full overflow-hidden mr-4 flex-shrink-0">
                            <img id="customerImage" src="" alt="é¡§å®¢" class="w-full h-full object-cover" />
                        </div>
                        <div class="flex-grow">
                            <div class="flex justify-between items-center mb-2">
                                <h3 id="customerName" class="text-lg font-bold">é¡§å®¢åç¨±</h3>
                                <div class="bg-yellow-100 dark:bg-china-gold/20 text-yellow-800 dark:text-china-cream px-3 py-1 rounded-full text-sm">
                                    å‰©é¤˜æ™‚é–“: <span id="timer" class="font-bold">60</span>ç§’
                                </div>
                            </div>
                            <p id="customerRequest" class="text-gray-700 dark:text-china-cream">é¡§å®¢è«‹æ±‚...</p>
                        </div>
                    </div>
                </div>

                <!-- Fortune Telling Tools -->
                <div class="mb-6">
                    <h3 class="text-xl font-bold mb-3 text-china-red dark:text-china-gold">é¸æ“‡å åœå·¥å…·</h3>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                        <div class="fortune-card p-3 bg-white dark:bg-china-ink rounded-lg shadow-md cursor-pointer hover:shadow-lg transition-all" data-tool="yijing">
                            <div class="text-center">
                                <div class="text-4xl mb-2">ğŸ‹</div>
                                <h4 class="font-bold">æ˜“ç¶“å¦è±¡</h4>
                            </div>
                        </div>
                        <div class="fortune-card p-3 bg-white dark:bg-china-ink rounded-lg shadow-md cursor-pointer hover:shadow-lg transition-all" data-tool="ziwei">
                            <div class="text-center">
                                <div class="text-4xl mb-2">ğŸŒŒ</div>
                                <h4 class="font-bold">ç´«å¾®æ–—æ•¸</h4>
                            </div>
                        </div>
                        <div class="fortune-card p-3 bg-white dark:bg-china-ink rounded-lg shadow-md cursor-pointer hover:shadow-lg transition-all" data-tool="fengshui">
                            <div class="text-center">
                                <div class="text-4xl mb-2">ğŸ§­</div>
                                <h4 class="font-bold">é¢¨æ°´ç¾…ç›¤</h4>
                            </div>
                        </div>
                        <div class="fortune-card p-3 bg-white dark:bg-china-ink rounded-lg shadow-md cursor-pointer hover:shadow-lg transition-all" data-tool="face">
                            <div class="text-center">
                                <div class="text-4xl mb-2">ğŸ˜Š</div>
                                <h4 class="font-bold">é¢ç›¸è§€æ¸¬</h4>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Fortune Telling Process -->
                <div class="mb-6">
                    <h3 class="text-xl font-bold mb-3 text-china-red dark:text-china-gold">å åœæ­¥é©Ÿ</h3>
                    <div class="grid grid-cols-2 md:grid-cols-3 gap-3">
                        <div class="fortune-card p-3 bg-white dark:bg-china-ink rounded-lg shadow-md cursor-pointer hover:shadow-lg transition-all" data-step="purify">
                            <div class="text-center">
                                <div class="text-4xl mb-2">ğŸ•¯ï¸</div>
                                <h4 class="font-bold">æ·¨å¿ƒç¥ˆç¦</h4>
                            </div>
                        </div>
                        <div class="fortune-card p-3 bg-white dark:bg-china-ink rounded-lg shadow-md cursor-pointer hover:shadow-lg transition-all" data-step="divine">
                            <div class="text-center">
                                <div class="text-4xl mb-2">ğŸ“œ</div>
                                <h4 class="font-bold">æ–½åœæ¨æ¼”</h4>
                            </div>
                        </div>
                        <div class="fortune-card p-3 bg-white dark:bg-china-ink rounded-lg shadow-md cursor-pointer hover:shadow-lg transition-all" data-step="interpret">
                            <div class="text-center">
                                <div class="text-4xl mb-2">ğŸ§§</div>
                                <h4 class="font-bold">è§£å¦è«–å‘½</h4>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Predictions Section -->
                <div class="mb-6">
                    <h3 class="text-xl font-bold mb-3 text-china-red dark:text-china-gold">é¸æ“‡é æ¸¬çµæœ</h3>
                    <div class="grid grid-cols-2 gap-3">
                        <div class="fortune-card p-3 bg-white dark:bg-china-ink rounded-lg shadow-md cursor-pointer hover:shadow-lg transition-all" data-prediction="positive">
                            <div class="text-center">
                                <div class="text-4xl mb-2">ğŸ‰</div>
                                <h4 class="font-bold">å‰é‹</h4>
                            </div>
                        </div>
                        <div class="fortune-card p-3 bg-white dark:bg-china-ink rounded-lg shadow-md cursor-pointer hover:shadow-lg transition-all" data-prediction="negative">
                            <div class="text-center">
                                <div class="text-4xl mb-2">âš ï¸</div>
                                <h4 class="font-bold">å…‡é‹</h4>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="flex justify-center">
                    <button id="finishBtn" class="px-6 py-2 bg-china-red hover:bg-opacity-90 text-china-cream rounded-full shadow-lg transition-transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-china-gold">
                        å®Œæˆå åœ
                    </button>
                </div>
            </div>

            <!-- Results Modal (initially hidden) -->
            <div id="resultsModal" class="hidden fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-50">
                <div class="bg-white dark:bg-china-ink rounded-lg shadow-xl p-6 max-w-md w-full mx-4">
                    <h2 id="resultTitle" class="text-2xl font-bold mb-4 text-center text-china-red dark:text-china-gold">å åœçµæœ</h2>
                    <p id="resultMessage" class="mb-4 text-center">çµæœè¨Šæ¯...</p>
                    <div class="text-center mb-4">
                        <div class="text-4xl mb-2">ğŸ–ï¸</div>
                        <div class="text-lg font-bold">ç²å¾—åˆ†æ•¸: <span id="earnedPoints" class="text-china-gold">0</span></div>
                    </div>
                    <div class="flex justify-center">
                        <button id="continueBtn" class="px-6 py-2 bg-china-red hover:bg-opacity-90 text-china-cream rounded-full shadow-lg transition-transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-china-gold">
                            ç¹¼çºŒ
                        </button>
                    </div>
                </div>
            </div>
        </main>

        <!-- Game Footer -->
        <footer class="china-bg text-china-cream text-center p-4 mt-auto">
            <div class="container mx-auto">
                <p>å¤©å‘½å‚³å¥‡ Â© 2025 | æ´æ‚‰å¤©æ©Ÿï¼ŒæŒ‡å¼•å‘½é‹</p>
            </div>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Sound Effects
            const selectSound = document.getElementById('selectSound');
            const successSound = document.getElementById('successSound');
            const failSound = document.getElementById('failSound');
            const modalSound = document.getElementById('modalSound');

            // Game Elements
            const startScreen = document.getElementById('startScreen');
            const gameArea = document.getElementById('gameArea');
            const gameState = document.getElementById('gameState');
            const startBtn = document.getElementById('startBtn');
            const finishBtn = document.getElementById('finishBtn');
            const resultsModal = document.getElementById('resultsModal');
            const continueBtn = document.getElementById('continueBtn');
            const scoreElement = document.getElementById('score');
            const levelElement = document.getElementById('level');
            const timerElement = document.getElementById('timer');
            const customerName = document.getElementById('customerName');
            const customerRequest = document.getElementById('customerRequest');
            const customerImage = document.getElementById('customerImage');
            const resultTitle = document.getElementById('resultTitle');
            const resultMessage = document.getElementById('resultMessage');
            const earnedPoints = document.getElementById('earnedPoints');
            const fortuneCards = document.querySelectorAll('.fortune-card');

            // Game Variables
            let score = 0;
            let level = 1;
            let timer = 60;
            let timerInterval;
            let currentCustomer = null;
            let selectedTool = null;
            let selectedSteps = [];
            let selectedPrediction = null;

            // Customers Data
            const customers = [
                {
                    name: 'å¼µå…ˆç”Ÿ',
                    request: 'å¾æ¬²çŸ¥äº‹æ¥­å‰ç¨‹ï¼Œæ±‚ä¸€å¦ä»¥è§€å¤©æ©Ÿã€‚',
                    imageIndex: 1,
                    expectation: {
                        tool: 'yijing',
                        steps: ['purify', 'divine', 'interpret'],
                        prediction: 'positive'
                    }
                },
                {
                    name: 'æå°å§',
                    request: 'è¿‘æ—¥å¿ƒæœ‰æ‰€å±¬ï¼Œæ±‚ç´«å¾®æ–—æ•¸æ¢å§»ç·£ã€‚',
                    imageIndex: 2,
                    expectation: {
                        tool: 'ziwei',
                        steps: ['purify', 'divine', 'interpret'],
                        prediction: 'positive'
                    }
                },
                {
                    name: 'ç‹å¥³å£«',
                    request: 'å®…ä¸­å¤šæœ‰ä¸å¯§ï¼Œæ±‚é¢¨æ°´èª¿å’Œæ°£å ´ã€‚',
                    imageIndex: 3,
                    expectation: {
                        tool: 'fengshui',
                        steps: ['purify', 'interpret', 'divine'],
                        prediction: 'negative'
                    }
                },
                {
                    name: 'é™³å…ˆç”Ÿ',
                    request: 'è²¡é‹èµ·ä¼ä¸å®šï¼Œæ±‚é¢ç›¸è§€é‹å‹¢ã€‚',
                    imageIndex: 4,
                    expectation: {
                        tool: 'face',
                        steps: ['purify', 'divine', 'interpret'],
                        prediction: 'positive'
                    }
                },
                {
                    name: 'æ—å¥³å£«',
                    request: 'å­å—£å­¸æ¥­ä¸æŒ¯ï¼Œæ±‚æ˜“ç¶“æŒ‡å¼•å‰è·¯ã€‚',
                    imageIndex: 5,
                    expectation: {
                        tool: 'yijing',
                        steps: ['purify', 'interpret', 'divine'],
                        prediction: 'negative'
                    }
                }
            ];

            // Generate Placeholder Image
            function getCustomerImage(index) {
                const hue = (index * 60) % 360;
                const color = `hsl(${hue}, 70%, 60%)`;
                const initials = customers[index % customers.length].name.charAt(0);
                return `data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100"><rect width="100" height="100" fill="${encodeURIComponent(color)}"/><text x="50" y="60" font-size="40" text-anchor="middle" fill="white" font-family="Noto Serif TC">${initials}</text></svg>`;
            }

            // Start Game
            startBtn.addEventListener('click', () => {
                selectSound.play();
                startScreen.classList.add('hidden');
                gameArea.classList.remove('hidden');
                startRound();
            });

            // Finish Button
            finishBtn.addEventListener('click', () => {
                selectSound.play();
                evaluateResult();
            });

            // Continue after results
            continueBtn.addEventListener('click', () => {
                selectSound.play();
                resultsModal.classList.add('hidden');
                startRound();
            });

            // Select Fortune Cards
            fortuneCards.forEach(card => {
                card.addEventListener('click', () => {
                    selectSound.play();
                    card.classList.add('animate-flip');
                    setTimeout(() => card.classList.remove('animate-flip'), 600);

                    if (card.hasAttribute('data-tool')) {
                        fortuneCards.forEach(c => {
                            if (c.hasAttribute('data-tool')) {
                                c.classList.remove('selected', 'ring-2', 'ring-china-gold');
                            }
                        });
                        card.classList.add('selected', 'ring-2', 'ring-china-gold');
                        selectedTool = card.getAttribute('data-tool');
                    }

                    if (card.hasAttribute('data-step')) {
                        const step = card.getAttribute('data-step');
                        if (selectedSteps.includes(step)) {
                            selectedSteps = selectedSteps.filter(s => s !== step);
                            card.classList.remove('selected', 'ring-2', 'ring-china-gold');
                        } else {
                            selectedSteps.push(step);
                            card.classList.add('selected', 'ring-2', 'ring-china-gold');
                        }
                    }

                    if (card.hasAttribute('data-prediction')) {
                        fortuneCards.forEach(c => {
                            if (c.hasAttribute('data-prediction')) {
                                c.classList.remove('selected', 'ring-2', 'ring-china-gold');
                            }
                        });
                        card.classList.add('selected', 'ring-2', 'ring-china-gold');
                        selectedPrediction = card.getAttribute('data-prediction');
                    }
                });
            });

            // Start a new round
            function startRound() {
                clearInterval(timerInterval);
                selectedTool = null;
                selectedSteps = [];
                selectedPrediction = null;
                fortuneCards.forEach(card => {
                    card.classList.remove('selected', 'ring-2', 'ring-china-gold');
                });

                timer = Math.max(20, 60 - (level - 1) * 5);
                timerElement.textContent = timer;

                currentCustomer = customers[Math.floor(Math.random() * customers.length)];
                customerName.textContent = currentCustomer.name;
                customerRequest.textContent = currentCustomer.request;
                customerImage.src = getCustomerImage(currentCustomer.imageIndex);

                timerInterval = setInterval(() => {
                    timer--;
                    timerElement.textContent = timer;
                    if (timer <= 0) {
                        clearInterval(timerInterval);
                        evaluateResult(true);
                    }
                }, 1000);
            }

            // Evaluate the result
            function evaluateResult(timeout = false) {
                clearInterval(timerInterval);
                let correctPoints = 0;
                let timeBonus = 0;
                let totalPoints = 0;
                let correct = true;
                let feedback = [];

                if (timeout) {
                    resultTitle.textContent = 'å¤©æ©Ÿæœªè§£ï¼';
                    resultMessage.textContent = 'æ™‚é–“å·²ç›¡ï¼Œé¡§å®¢ä¸æ»¿æ‚¨çš„å åœé€Ÿåº¦ã€‚';
                    earnedPoints.textContent = '0';
                    modalSound.play();
                    resultsModal.classList.remove('hidden');
                    resultsModal.querySelector('div').classList.add('modal-animate');
                    return;
                }

                if (!selectedTool || selectedSteps.length < 3 || !selectedPrediction) {
                    resultTitle.textContent = 'å åœæœªæˆï¼';
                    resultMessage.textContent = 'æ‚¨çš„å åœä¸å®Œæ•´ï¼Œé¡§å®¢å¤±æœ›é›¢å»ã€‚';
                    earnedPoints.textContent = '0';
                    modalSound.play();
                    resultsModal.classList.remove('hidden');
                    resultsModal.querySelector('div').classList.add('modal-animate');
                    return;
                }

                if (selectedTool === currentCustomer.expectation.tool) {
                    correctPoints += 10;
                    feedback.push('âœ“ æ­£ç¢ºé¸æ“‡å åœä¹‹æ³•');
                } else {
                    correct = false;
                    feedback.push('âœ— å åœä¹‹æ³•æœ‰èª¤');
                }

                let correctStepsCount = 0;
                for (let i = 0; i < currentCustomer.expectation.steps.length; i++) {
                    if (selectedSteps[i] === currentCustomer.expectation.steps[i]) {
                        correctStepsCount++;
                    }
                }

                if (correctStepsCount === 3) {
                    correctPoints += 15;
                    feedback.push('âœ“ å åœæ­¥é©Ÿç„¡æš‡');
                } else if (correctStepsCount >= 1) {
                    correctPoints += 5;
                    correct = false;
                    feedback.push(`â–³ æ­¥é©Ÿéƒ¨åˆ†æ­£ç¢º (${correctStepsCount}/3)`);
                } else {
                    correct = false;
                    feedback.push('âœ— æ­¥é©Ÿå…¨èª¤');
                }

                if (selectedPrediction === currentCustomer.expectation.prediction) {
                    correctPoints += 10;
                    feedback.push('âœ“ é æ¸¬å¤©æ©Ÿç²¾æº–');
                } else {
                    correct = false;
                    feedback.push('âœ— é æ¸¬å¤©æ©Ÿæœ‰èª¤');
                }

                if (correct) {
                    timeBonus = Math.min(15, Math.floor(timer / 4));
                }

                totalPoints = correctPoints + timeBonus;
                score += totalPoints;
                scoreElement.textContent = score;

                if (score >= level * 100) {
                    level++;
                    levelElement.textContent = level;
                }

                if (correct) {
                    successSound.play();
                    resultTitle.textContent = 'å¤©å‘½æ´æ‚‰ï¼';
                    resultMessage.innerHTML = `
                        <p class="mb-2">é¡§å®¢å°æ‚¨çš„å åœè®šä¸çµ•å£ï¼</p>
                        <ul class="text-left list-inside list-disc">
                            ${feedback.map(fb => `<li>${fb}</li>`).join('')}
                        </ul>
                        <p class="mt-2">åŸºç¤åˆ†æ•¸: ${correctPoints} + æ™‚æ©Ÿçå‹µ: ${timeBonus}</p>
                    `;
                } else {
                    failSound.play();
                    resultTitle.textContent = 'å¤©æ©Ÿä¸æ˜ï¼';
                    resultMessage.innerHTML = `
                        <p class="mb-2">é¡§å®¢å°æ‚¨çš„å åœé —æœ‰ç–‘æ…®...</p>
                        <ul class="text-left list-inside list-disc">
                            ${feedback.map(fb => `<li>${fb}</li>`).join('')}
                        </ul>
                        <p class="mt-2">åŸºç¤åˆ†æ•¸: ${correctPoints}</p>
                    `;
                }

                earnedPoints.textContent = totalPoints;
                modalSound.play();
                resultsModal.classList.remove('hidden');
                resultsModal.querySelector('div').classList.add('modal-animate');
            }
        });
    </script>
</body>
</html>
```

---

## ä¸»è¦æ”¹é€²è©³è§£

### 1. ä¸­å¼éŸ³æ•ˆ
- **éŸ³æ•ˆè³‡æº**ï¼šä½¿ç”¨äº† Freesound.org çš„å…è²»éŸ³æ•ˆä½œç‚ºä½”ä½ç¬¦ï¼Œæ¨¡æ“¬å¤ç®ï¼ˆé¸æ“‡ï¼‰ã€çµç¶ï¼ˆæˆåŠŸï¼‰ã€éŠ…é‘¼ï¼ˆå¤±æ•—ï¼‰å’Œé¢¨éˆ´ï¼ˆæ¨¡æ…‹æ¡†ï¼‰ã€‚æ‚¨å¯ä»¥æ›¿æ›ç‚ºæ›´ç¬¦åˆä¸­åœ‹é¢¨çš„éŸ³æ•ˆï¼ˆä¾‹å¦‚å¾éŸ³æ•ˆåº«å¦‚ Zapsplat.com ç²å–å¤ç´æˆ–ç°«è²ï¼‰ã€‚
- **è§¸ç™¼æ™‚æ©Ÿ**ï¼š
  - é¸æ“‡å·¥å…·ã€æ­¥é©Ÿæˆ–é æ¸¬æ™‚ï¼šæ’­æ”¾ `selectSound`ã€‚
  - å®Œæˆå åœï¼ˆæˆåŠŸ/å¤±æ•—ï¼‰ï¼šæ’­æ”¾ `successSound` æˆ– `failSound`ã€‚
  - çµæœæ¨¡æ…‹æ¡†å‡ºç¾ï¼šæ’­æ”¾ `modalSound`ã€‚
- **æ³¨æ„äº‹é …**ï¼šç•¶å‰éŸ³æ•ˆç‚ºä½”ä½ç¬¦ï¼Œå»ºè­°ä½¿ç”¨é«˜å“è³ªçš„ WAV æˆ– MP3 æ–‡ä»¶ï¼Œä¸¦ç¢ºä¿æ–‡ä»¶å¤§å°å°æ–¼ 500KB ä»¥åŠ å¿«åŠ è¼‰é€Ÿåº¦ã€‚

### 2. è¯éº—å‹•ç•«
- **å¡ç‰‡ç¿»è½‰**ï¼š`animate-flip` ä½¿ç”¨ 3D æ—‹è½‰æ•ˆæœï¼Œæ¯æ¬¡é»æ“Šå¡ç‰‡æ™‚è§¸ç™¼ï¼Œæ¨¡æ“¬ç¿»é–‹å‘½ç›¤çš„æ„Ÿè¦ºã€‚
- **ç²’å­ç‰¹æ•ˆ**ï¼šæ·»åŠ äº†æ¼‚æµ®çš„è“®èŠ±åœ–æ¡ˆï¼ˆä½¿ç”¨ SVGï¼‰ï¼Œé€šé `lotus-float` å‹•ç•«å¯¦ç¾ä¸Šä¸‹æ¼‚æµ®å’Œæ—‹è½‰ï¼Œåˆ†æ•£åœ¨ç•«é¢å››è§’ã€‚
- **é–‹å§‹ç•«é¢**ï¼šä½¿ç”¨ `fade-in` å‹•ç•«ï¼Œç•«é¢å¾æ¨¡ç³Šåˆ°æ¸…æ™°ï¼Œä¸­å¤®çš„ã€Œå‘½ã€å­—åœ–æ¨™æ¼‚æµ®ã€‚
- **æ¨¡æ…‹æ¡†å‹•ç•«**ï¼šçµæœæ¨¡æ…‹æ¡†å‡ºç¾æ™‚ä½¿ç”¨ `fade-in`ï¼Œçµåˆç¸®æ”¾æ•ˆæœã€‚
- **é¸æ“‡é«˜äº®**ï¼šé¸ä¸­çš„å¡ç‰‡æ‡‰ç”¨ `pulse-glow`ï¼Œæ¨¡æ“¬é‡‘è‰²å…‰èŠ’è„ˆå‹•ã€‚
- **æœªä¾†æ”¹é€²**ï¼šå¯æ·»åŠ å…¨å±éå ´å‹•ç•«ï¼ˆä¾‹å¦‚å®Œæˆå åœæ™‚é¡¯ç¤ºç¥¥é›²ï¼Œä½¿ç”¨ Canvas æˆ– CSS å‹•ç•«ï¼‰ã€‚

### 3. ä¸­åœ‹é¢¨é…è‰²
- **è‰²èª¿**ï¼š
  - ç´…è‰² (`#B22222`)ï¼šç”¨æ–¼æŒ‰éˆ•ã€æ¨™é¡Œå’Œå¼·èª¿å…ƒç´ ã€‚
  - é‡‘è‰² (`#D4A017`)ï¼šç”¨æ–¼åˆ†æ•¸ã€é‚Šæ¡†å’Œé«˜äº®ã€‚
  - å¢¨ç¶  (`#2F4F4F`)ï¼šæ·±è‰²æ¨¡å¼çš„å¡ç‰‡èƒŒæ™¯ï¼Œæ­é…ç±³ç™½ (`#F5F5DC`) æ–‡å­—ã€‚
  - æ·±è— (`#1A252F`)ï¼šæ·±è‰²æ¨¡å¼çš„ä¸»è¦èƒŒæ™¯ã€‚
- **èƒŒæ™¯**ï¼šä½¿ç”¨ç´…é‡‘æ¼¸è®Šï¼ˆ`.china-bg`ï¼‰ä½œç‚ºé ­éƒ¨å’Œåº•éƒ¨ï¼Œæ·±è‰²æ¨¡å¼åˆ‡æ›ç‚ºæ·±è—åˆ°å¢¨ç¶ æ¼¸è®Šã€‚
- **å­—é«”**ï¼šä½¿ç”¨ `Noto Serif TC`ï¼Œä¸€æ¬¾å„ªé›…çš„ä¸­æ–‡è¥¯ç·šå­—é«”ï¼Œå¢å¼·å‚³çµ±æ›¸å·æ°£æ¯ã€‚

### 4. ä¸­å¼å åœå·¥å…·
- **å·¥å…·æ›¿æ›**ï¼š
  - æ˜“ç¶“å¦è±¡ï¼šæ–å¦æ¨æ¼”ï¼Œä»£è¡¨ç¶“å…¸çš„ä¸­å¼å åœã€‚
  - ç´«å¾®æ–—æ•¸ï¼šæ ¹æ“šç”Ÿè¾°æ’ç›¤ï¼Œé©åˆæ„Ÿæƒ…å’Œäº‹æ¥­é‹å‹¢ã€‚
  - é¢¨æ°´ç¾…ç›¤ï¼šæ¸¬é‡ç’°å¢ƒæ°£å ´ï¼Œé©ç”¨æ–¼å®¶å±…å•é¡Œã€‚
  - é¢ç›¸è§€æ¸¬ï¼šè§€å¯Ÿé¢éƒ¨ç‰¹å¾µï¼Œé æ¸¬å€‹äººé‹å‹¢ã€‚
- **æ­¥é©Ÿæ›´æ–°**ï¼š
  - æ·¨å¿ƒç¥ˆç¦ï¼šç„šé¦™éœå¿ƒï¼Œç‚ºå åœåšæº–å‚™ã€‚
  - æ–½åœæ¨æ¼”ï¼šåŸ·è¡Œå…·é«”å åœå‹•ä½œï¼ˆæ–å¦ã€æ’ç›¤ç­‰ï¼‰ã€‚
  - è§£å¦è«–å‘½ï¼šè§£è®€çµæœä¸¦çµ¦å‡ºå»ºè­°ã€‚
- **é¡§å®¢æ•¸æ“šæ›´æ–°**ï¼šé¡§å®¢çš„è«‹æ±‚å’ŒæœŸæœ›å·²èª¿æ•´ç‚ºä¸­å¼èªå¢ƒï¼Œä¾‹å¦‚ã€Œæ±‚ä¸€å¦ä»¥è§€å¤©æ©Ÿã€ã€Œæ±‚ç´«å¾®æ–—æ•¸æ¢å§»ç·£ã€ï¼Œæ›´ç¬¦åˆä¸­åœ‹æ–‡åŒ–ã€‚

### 5. å…¶ä»–èª¿æ•´
- **éŠæˆ²åç¨±**ï¼šå¾ã€Œç®—å‘½å¸«å‚³å¥‡ã€æ”¹ç‚ºã€Œå¤©å‘½å‚³å¥‡ã€ï¼Œæ›´å…·ä¸­åœ‹é¢¨çš„ç¥ç§˜æ„Ÿå’Œæ°£å‹¢ã€‚
- **ç•Œé¢æ–‡å­—**ï¼šæ›´æ–°ç‚ºæ›´æ–‡é›…çš„è¡¨è¿°ï¼Œä¾‹å¦‚ã€Œæ´æ‚‰å¤©æ©Ÿã€ã€Œå¤©æ©Ÿæœªè§£ã€ã€‚
- **åœ–æ¨™**ï¼šä½¿ç”¨ emoji ä½œç‚ºè‡¨æ™‚åœ–æ¨™ï¼ˆğŸ‹ã€ğŸŒŒã€ğŸ§­ã€ğŸ˜Šï¼‰ï¼Œå»ºè­°æœªä¾†æ›¿æ›ç‚ºä¸­åœ‹é¢¨ SVG åœ–æ¨™ï¼ˆä¾‹å¦‚ç«¹ç°½ã€æ˜Ÿç›¤ã€ç¾…ç›¤ã€é¢éƒ¨è¼ªå»“ï¼‰ã€‚
- **æ·±è‰²æ¨¡å¼**ï¼šç¢ºä¿æ‰€æœ‰å…ƒç´ åœ¨æ·±è‰²æ¨¡å¼ä¸‹æ¸…æ™°å¯è¦‹ï¼Œå¡ç‰‡èƒŒæ™¯ä½¿ç”¨å¢¨ç¶ ï¼Œæ–‡å­—ä½¿ç”¨ç±³ç™½ã€‚

---

## ä½¿ç”¨èªªæ˜

1. **é‹è¡ŒéŠæˆ²**ï¼š
   - å°‡ä»£ç¢¼ä¿å­˜ç‚º `index.html`ï¼Œåœ¨ç€è¦½å™¨ä¸­ç›´æ¥æ‰“é–‹å³å¯é‹è¡Œã€‚
   - ç„¡éœ€é¡å¤–ä¾è³´ï¼Œåƒ…ä½¿ç”¨ Tailwind CSS CDN å’Œ Google Fontsã€‚

2. **éŠæˆ²ç©æ³•**ï¼š
   - é»æ“Šã€Œé–‹å•Ÿå¤©å‘½ã€é–‹å§‹éŠæˆ²ã€‚
   - æ ¹æ“šé¡§å®¢è«‹æ±‚é¸æ“‡æ­£ç¢ºçš„å åœå·¥å…·ï¼ˆæ˜“ç¶“ã€ç´«å¾®ç­‰ï¼‰ã€åŸ·è¡Œä¸‰å€‹æ­¥é©Ÿï¼ˆæ·¨å¿ƒã€æ–½åœã€è§£å¦ï¼‰ï¼Œä¸¦é æ¸¬å‰å…‡ã€‚
   - åœ¨æ™‚é–“é™åˆ¶å…§å®Œæˆå åœï¼Œæ ¹æ“šæ­£ç¢ºæ€§å’Œå‰©é¤˜æ™‚é–“ç²å¾—åˆ†æ•¸ã€‚
   - åˆ†æ•¸ç´¯ç©åˆ° 100 çš„å€æ•¸æ™‚å‡ç´šï¼Œæ™‚é–“é™åˆ¶é€ç´šç¸®çŸ­ã€‚

3. **éŸ³æ•ˆæ¸¬è©¦**ï¼š
   - ç•¶å‰éŸ³æ•ˆç‚ºä½”ä½ç¬¦ï¼Œå¯èƒ½èˆ‡ä¸­åœ‹é¢¨ç•¥æœ‰åå·®ã€‚å»ºè­°æ›¿æ›ç‚ºçœŸå¯¦çš„å¤ç®ã€çµç¶ç­‰éŸ³æ•ˆï¼ˆå¯å¾ Freesound.org ä¸‹è¼‰ï¼‰ã€‚
   - ç¢ºä¿éŸ³æ•ˆæ–‡ä»¶æ ¼å¼ç‚º MP3 æˆ– WAVï¼Œä¸¦æ¸¬è©¦åŠ è¼‰é€Ÿåº¦ã€‚

4. **å‹•ç•«æ•ˆæœ**ï¼š
   - å¡ç‰‡ç¿»è½‰å’Œç²’å­ç‰¹æ•ˆå·²å¯¦ç¾ï¼Œå»ºè­°åœ¨é«˜æ€§èƒ½è¨­å‚™ä¸Šæ¸¬è©¦ä»¥ç¢ºä¿æµæš¢ã€‚
   - å¦‚æœéœ€è¦æ›´è¤‡é›œçš„å‹•ç•«ï¼ˆä¾‹å¦‚å…¨å±ç¥¥é›²ï¼‰ï¼Œå¯ä»¥é€²ä¸€æ­¥ä½¿ç”¨ Canvas æˆ–ç¬¬ä¸‰æ–¹åº«å¦‚ GSAPã€‚

---

## æœªä¾†æ”¹é€²å»ºè­°

1. **çœŸå¯¦åœ–æ¨™èˆ‡åœ–ç‰‡**ï¼š
   - ç‚ºæ¯ç¨®å åœå·¥å…·è¨­è¨ˆå°ˆå±¬çš„ SVG åœ–æ¨™ï¼ˆä¾‹å¦‚æ˜“ç¶“çš„å…«å¦åœ–ã€ç´«å¾®çš„å‘½ç›¤ï¼‰ã€‚
   - ç‚ºé¡§å®¢æ·»åŠ ä¸­åœ‹é¢¨çš„å¡é€šé ­åƒï¼ˆå¯ä½¿ç”¨ AI å·¥å…·å¦‚ MidJourney ç”Ÿæˆï¼‰ã€‚

2. **é«˜å“è³ªéŸ³æ•ˆ**ï¼š
   - å¾å°ˆæ¥­éŸ³æ•ˆåº«ï¼ˆå¦‚ Zapsplat æˆ– AudioJungleï¼‰ç²å–å¤ç®ã€çµç¶ã€ç°«ç­‰éŸ³æ•ˆã€‚
   - æ·»åŠ èƒŒæ™¯éŸ³æ¨‚ï¼ˆä¾‹å¦‚è¼•æŸ”çš„å¤é¢¨éŸ³æ¨‚ï¼‰ï¼Œä¸¦æä¾›éœéŸ³é¸é …ã€‚

3. **é€²åº¦ä¿å­˜**ï¼š
   - ä½¿ç”¨ `localStorage` ä¿å­˜åˆ†æ•¸å’Œç­‰ç´šï¼Œé¿å…åˆ·æ–°é é¢å¾Œé€²åº¦ä¸Ÿå¤±ï¼š
     ```javascript
     function saveProgress() {
         localStorage.setItem('tianming', JSON.stringify({ score, level }));
     }
     function loadProgress() {
         const saved = localStorage.getItem('tianming');
         if (saved) {
             const { score: savedScore, level: savedLevel } = JSON.parse(saved);
             score = savedScore;
             level = savedLevel;
             scoreElement.textContent = score;
             levelElement.textContent = level;
         }
     }
     ```

4. **æ›´å¤šé¡§å®¢èˆ‡éš¨æ©Ÿæ€§**ï¼š
   - å¢åŠ é¡§å®¢æ•¸é‡ï¼ˆ10-15 ä½ï¼‰ï¼Œä¸¦éš¨æ©Ÿç”Ÿæˆéƒ¨åˆ†éœ€æ±‚ï¼ˆä¾‹å¦‚å·¥å…·å¾å…©å€‹é¸é …ä¸­éš¨æ©Ÿé¸æ“‡ï¼‰ã€‚
   - ç¤ºä¾‹ï¼š
     ```javascript
     customers.push({
         name: 'è¶™å…ˆç”Ÿ',
         request: 'äº‹æ¥­å±¢å—æŒ«æŠ˜ï¼Œæ±‚æŒ‡å¼•ã€‚',
         imageIndex: 6,
         expectation: {
             tool: ['yijing', 'ziwei'][Math.floor(Math.random() * 2)],
             steps: ['purify', 'divine', 'interpret'],
             prediction: 'positive'
         }
     });
     ```

5. **æ’è¡Œæ¦œèˆ‡åˆ†äº«**ï¼š
   - æ·»åŠ ç°¡å–®çš„æ’è¡Œæ¦œï¼Œè¨˜éŒ„å‰ 5 ååˆ†æ•¸ã€‚
   - å¯¦ç¾åˆ†äº«åŠŸèƒ½ï¼Œå…è¨±ç©å®¶åˆ†äº«åˆ†æ•¸åˆ° Xï¼š
     ```javascript
     if (navigator.share) {
         navigator.share({
             title: 'å¤©å‘½å‚³å¥‡',
             text: `æˆ‘åœ¨å¤©å‘½å‚³å¥‡ä¸­ç²å¾— ${score} åˆ†ï¼å¿«ä¾†æŒ‘æˆ°ï¼`,
             url: window.location.href
         });
     }
     ```

---
